<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui">

    <ui:composition template="Template.xhtml">
        <ui:define name="title">#{msg.CompanyDetails}</ui:define>
        <ui:define name="content">  
            <h:form id="companyDetailsForm">
                <p:fieldset legend="#{msg.CompanyDetails}">            
                    <p:messages closable="true" id="message"/>
                    <p:panelGrid columns="2" id="companyDetails">
                        <p:outputLabel value="#{msg.CompanyName} *" />
                        <p:inputText id="CompanyName" value="#{companyDetailsBean.companyDetails.companyName}" title="#{msg.CompanyName}"  required="true" label="#{msg.CompanyName}"/>
                        <p:outputLabel value="#{msg.TypeAccount}" for="typeAccount" />
                        <p:selectOneRadio id="typeAccount" value="#{companyDetailsBean.companyDetails.typeOfAccount}">
                            <f:selectItem itemValue="1" itemLabel="#{msg.Current}"/>
                            <f:selectItem itemValue="0" itemLabel="#{msg.Savings}"/>
                        </p:selectOneRadio>
                        <p:outputLabel value="#{msg.Address1} *"  />
                        <p:inputTextarea id="address1" value="#{companyDetailsBean.companyDetails.address1}" title="#{msg.Address1}" required="true" label="#{msg.Address1}"/>
                        <p:outputLabel value="#{msg.Address2}"  />
                        <p:inputTextarea id="address2" value="#{companyDetailsBean.companyDetails.address2}" title="#{msg.Address2}" label="#{msg.Address2}"/>
                        <p:outputLabel value="#{msg.PhNo} *"  />
                        <p:inputText id="phNo" value="#{companyDetailsBean.companyDetails.phoneNo}" title="#{msg.PhNo}" required="true" label="#{msg.PhNo}" />
                        <p:outputLabel value="#{msg.BankAcctNO} *" />
                        <p:inputText id="bankAcctNO" binding="#{bankAcctNO}" type="password" value="#{companyDetailsBean.companyDetails.bankAccountNo}" title="#{msg.BankAcctNO}"  required="true" label="#{msg.BankAcctNO}"/>
                        <p:outputLabel value="#{msg.ConfirmBankAcctNO} *" />
                        <p:inputText id="confirmBankAcctNO" value="#{companyDetailsBean.companyDetails.confirmBankAccountNo}" title="#{msg.ConfirmBankAcctNO}" required="true" label="#{msg.ConfirmBankAcctNO}" validator="#{companyDetailsBean.accountNoValidator}">
                            <f:attribute name="bankAcctNO" value="#{bankAcctNO}"></f:attribute>
                        </p:inputText>
                        <p:outputLabel value="#{msg.IFSCCode} *" />                    
                        <p:inputText id="IFSCCode" value="#{companyDetailsBean.companyDetails.ifscCode}" title="#{msg.IFSCCode}"  required="true" label="#{msg.IFSCCode}"/>
                        <p:outputLabel value="#{msg.BankName} *"/>
                        <p:inputText id="bankName" value="#{companyDetailsBean.companyDetails.bankName}" title="#{msg.BankName}"  required="true" label="#{msg.BankName}"/>
                        <p:outputLabel value="#{msg.BranchName} *" />
                        <p:inputText id="branchName" value="#{companyDetailsBean.companyDetails.branchName}" title="#{msg.BranchName}" required="true" label="#{msg.BranchName}" />                    
                    </p:panelGrid>
                    <br/>
                    <p:commandButton value="#{msg.save}" action="#{companyDetailsBean.saveCompanyDetails()}" update=":companyDetailsForm" rendered="#{!(companyDetailsBean.companyDetails.id!=-9)}"/>
                    <p:commandButton value="#{msg.update}" action="#{companyDetailsBean.updateCompanyDetails()}" update=":companyDetailsForm" rendered="#{(companyDetailsBean.companyDetails.id!=-9)}"/>
                    &nbsp;&nbsp;&nbsp;
                    <p:commandButton value="#{msg.reset}" action="#{companyDetailsBean.resetCompanyDetails()}" update=":companyDetailsForm" immediate="true">
                        <p:resetInput target=":companyDetailsForm:companyDetails" />
                    </p:commandButton>
                    <br/>
                    <br/>
                    <p:dataTable id ="userList" value="#{companyDetailsBean.companyDetailsList}" var="companyDetails" rowKey="#{companyDetails.id}" style="text-align: center;" paginator="true" rows="25">
                        <p:column headerText="#{msg.CompanyName}">
                            <h:outputText value="#{companyDetails.companyName}"  />
                        </p:column>

                        <p:column headerText="#{msg.BankAcctNO}">
                            <h:outputText value="#{companyDetails.bankAccountNo}"  />
                        </p:column>

                        <p:column headerText="#{msg.BankName}">
                            <h:outputText value="#{companyDetails.bankName}"  />
                        </p:column>

                        <p:column headerText="#{msg.BranchName}">
                            <h:outputText value="#{companyDetails.branchName}"  />
                        </p:column>

                        <p:column headerText="#{msg.edit}">
                            <p:commandButton update=":companyDetailsForm" icon="ui-icon-pencil" title="Edit" immediate="true"  process="@this">
                                <p:resetInput target=":companyDetailsForm" />
                                <f:setPropertyActionListener value="#{companyDetails}" target="#{companyDetailsBean.companyDetails}" />
                            </p:commandButton>                                
                        </p:column>

                        <p:column headerText="#{msg.delete}">
                            <p:commandButton update=":companyDetailsForm" icon="ui-icon-trash" title="#{msg.delete}" immediate="true"  process="@this" actionListener="#{companyDetailsBean.deleteCompanyDetails(companyDetails)}" >                                
                                <p:confirm header="Confirmation" message="Are you sure,you want to delete the Company Details?"  icon="ui-icon-alert" />                                
                            </p:commandButton>                                
                        </p:column>
                    </p:dataTable>  
                    <p:confirmDialog showEffect="fade" global="true" severity="alert">
                        <p:commandButton value="Yes" type="button" styleClass="ui-confirmdialog-yes" icon="ui-icon-check" />
                        <p:commandButton value="No" type="button" styleClass="ui-confirmdialog-no" icon="ui-icon-close" />
                    </p:confirmDialog>
                </p:fieldset>
            </h:form>
        </ui:define>
    </ui:composition>

</html>
